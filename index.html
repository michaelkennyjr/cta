<!doctype HTML>
<html>

<head>
</head>

<body>
<script>
    
function createRequest(method, url) {
    var xhr = new XMLHttpRequest();
    if ("withCredentials" in xhr) {
        xhr.open(method, url, true);
    } else if (typeof XDomainRequest != "undefined") {
        xhr = new XDomainRequest();
        xhr.open(method, url);
    } else {
        xhr = null;
    }
    return xhr;
}

function getTag(text) {
    return text.match('<arrT>(.*)?</arrT>')[0];
}

function makeRequest() {
    var url = 'https://lapi.transitchicago.com/api/1.0/ttarrivals.aspx?key=3654e8cbb15840f7b928b2e39da94f1e&mapid=40380';
    var myRequest = createRequest('GET', url);
    myRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    myRequest.send();
    var xml = myRequest.responseText;
    mparse = new DOMParser();
    xmlDoc = mparse.parseFromString(xml, "text/xml");
    alert(xmlDoc.getElementsByTagName("arrT")[i].childNodes[0].nodeValue);
    console.log('I did the thing.');
}

makeRequest();

</script>

</body>
</html>
